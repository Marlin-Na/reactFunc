<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Build Cacheable Functions — reactFunc • reactFunc</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">reactFunc</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/reactFunc.html">Explanation</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/marlin-na/reactFunc">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Build Cacheable Functions</h1>
    </div>

    
    <p><code>reactFunc</code> is a function generator that returns a function that is cacheable when
combined with the use of <code>reactArg</code>.  See example.</p>
    

    <pre><span class='fu'>reactFunc</span>(<span class='no'>ARGV</span>, <span class='no'>...</span>)

<span class='fu'>reactArg</span>(<span class='no'>name</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>ARGV</dt>
      <dd>A named list or vector that represent the formal arguments of the returned function.</dd>
      <dt>...</dt>
      <dd>Name-expression pairs that describe the reactive expressions defined in the parent
environment of the returned function. The last one will be used as the returned value
of the returned function.  See example.</dd>
      <dt>name</dt>
      <dd>A symbol that corresponds to one of the names of <code>ARGV</code> (one of the argument name).
See example.</dd>
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>reactFunc</code> returns a closure (function); <code>name</code> should be used inside the
    <code>...</code> arguments to describe the argument as a reactive source.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Build</span>
<span class='no'>rf</span> <span class='kw'>&lt;-</span> <span class='fu'>reactFunc</span>(
    <span class='kw'>ARGV</span> <span class='kw'>=</span> <span class='fu'>alist</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>42</span>, <span class='kw'>y</span> <span class='kw'>=</span> ),
    <span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'>reactArg</span>(<span class='no'>x</span>),
    <span class='kw'>y</span> <span class='kw'>=</span> <span class='fu'>reactArg</span>(<span class='no'>y</span>),
    <span class='kw'>a</span> <span class='kw'>=</span> {
        <span class='fu'>print</span>(<span class='st'>"Getting a()..."</span>)
        <span class='fu'>Sys.sleep</span>(<span class='fl'>0.5</span>)
        <span class='fu'>x</span>() + <span class='fl'>1</span>
    },
    <span class='kw'>b</span> <span class='kw'>=</span> {
        <span class='fu'>print</span>(<span class='st'>"Getting b()..."</span>)
        <span class='fu'>Sys.sleep</span>(<span class='fl'>0.5</span>)
        <span class='fu'>y</span>() + <span class='fl'>1</span>
    },
    <span class='kw'>ans</span> <span class='kw'>=</span> {
        <span class='fu'>print</span>(<span class='st'>"Getting ans()"</span>)
        <span class='fu'>Sys.sleep</span>(<span class='fl'>0.5</span>)
        <span class='fu'>a</span>() + <span class='fu'>b</span>()
    }
)
<span class='co'>## Properties</span>
<span class='co'>#1. Definition</span>
<span class='no'>rf</span></div><div class='output co'>#&gt; function (x = 42, y) 
#&gt; {
#&gt;     assignedArgs &lt;- as.list(environment())
#&gt;     assignedArgNames &lt;- names(assignedArgs)
#&gt;     for (i in seq_along(assignedArgs)) {
#&gt;         do.call(what = `[[&lt;-`, args = list(eval(parse(text = &quot;ReactiveSources&quot;)), 
#&gt;             assignedArgNames[[i]], eval(parse(text = assignedArgNames[[i]]))), 
#&gt;             envir = parent.env(environment()))
#&gt;     }
#&gt;     lastExprName &lt;- tail(reactNames, 1)
#&gt;     result &lt;- shiny::isolate(do.call(lastExprName, args = list()))
#&gt;     result
#&gt; }
#&gt; &lt;environment: 0x6ce55a0&gt;</div><div class='input'><span class='co'>#2. First run</span>
<span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='fl'>6</span>; <span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fl'>9</span>
<span class='fu'>system.time</span>(<span class='no'>ans</span> <span class='kw'>&lt;-</span> <span class='fu'>rf</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>m</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>n</span>))</div><div class='output co'>#&gt; [1] &quot;Getting ans()&quot;
#&gt; [1] &quot;Getting a()...&quot;
#&gt; [1] &quot;Getting b()...&quot;</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   0.008   0.012   1.509 </div><div class='input'><span class='no'>ans</span></div><div class='output co'>#&gt; [1] 17</div><div class='input'><span class='co'>#3. Seconde run with the same arguments</span>
<span class='fu'>system.time</span>(<span class='no'>ans</span> <span class='kw'>&lt;-</span> <span class='fu'>rf</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>m</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>n</span>))</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   0.004   0.000   0.001 </div><div class='input'><span class='no'>ans</span></div><div class='output co'>#&gt; [1] 17</div><div class='input'><span class='co'>#4. Third run with an updated argument</span>
<span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fl'>7</span>
<span class='fu'>system.time</span>(<span class='no'>ans</span> <span class='kw'>&lt;-</span> <span class='fu'>rf</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>m</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>n</span>))</div><div class='output co'>#&gt; [1] &quot;Getting ans()&quot;
#&gt; [1] &quot;Getting b()...&quot;</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   0.012   0.000   1.005 </div><div class='input'><span class='no'>ans</span></div><div class='output co'>#&gt; [1] 15</div><div class='input'><span class='co'>#5. Change the value of `x` to default</span>
<span class='fu'>system.time</span>(<span class='no'>ans</span> <span class='kw'>&lt;-</span> <span class='fu'>rf</span>(<span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>n</span>))</div><div class='output co'>#&gt; [1] &quot;Getting ans()&quot;
#&gt; [1] &quot;Getting a()...&quot;</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   0.008   0.004   1.005 </div><div class='input'><span class='no'>ans</span></div><div class='output co'>#&gt; [1] 51</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jialin Ma.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
